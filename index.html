<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MLPI Integration Redirect</title>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const params = new URLSearchParams(window.location.search);
            const data = params.get('data');
            const message = document.getElementById("message");

            if (!message) {
                console.error("Failed to get message element");
                return;
            }

            if (data) {
                const protocolUrl = "mlpi://" + data;
                window.location.href = protocolUrl;

                message.textContent = "The handler should have been triggered. You may now close this page.";
            } else {
                message.textContent = "No data provided.";
            }
        });
    </script>
</head>
<body>
    <p id="message">Redirectingâ€¦</p>
    <p>If nothing happens automatically, click <a id="manualLink">here</a>.</p>
    <script>
        const manualLink = document.getElementById("manualLink");
        const data = new URLSearchParams(window.location.search).get('data') || '';
        manualLink.href = "mlpi://" + data;
    </script>
</body>
</html>
